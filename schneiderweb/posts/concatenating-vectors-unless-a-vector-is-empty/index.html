<!doctype html><html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Concatenating vectors unless a vector is empty â€“ W. Joel Schneider</title>
<meta name=author content="W. Joel Schneider">
<meta name=description content="W. Joel Schneider's Academic Website">
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6 crossorigin=anonymous>
<link rel=stylesheet href=/css/all.min.css>
<link rel=stylesheet href=/css/academicons.min.css>
<link rel=stylesheet type=text/css href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.css>
<link rel=stylesheet href=https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css>
<link rel=stylesheet href=/css/main.css>
<link rel=stylesheet href=/css/fonts.css>
<link href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css rel=stylesheet type=text/css>
</head>
<body data-spy=scroll data-target=#toc>
<div class=container><header>
<link rel=alternate type=application/rss+xml href=/index.xml><nav class="navbar navbar-expand-sm bg-dark navbar-dark d-flex mt-2 py-0">
<div class=d-inline-flex>
<ul class=navbar-nav>
<li class=nav-item>
<a href=/ title=Home class=nav-link>
<i class="fa fa-home"></i> </span>
</a>
</li>
<li class=nav-item>
<a href=/posts/ title=Posts class=nav-link>
Posts
</a>
</li>
<li class=nav-item>
<a href=/presentations title=Presentations class=nav-link>
Presentations
</a>
</li>
<li class=nav-item>
<a href=/projects/ title=Projects class=nav-link>
Projects
</a>
</li>
<li class=nav-item>
<a href=/courses/ title=Courses class=nav-link>
Courses
</a>
</li>
<li class=nav-item>
<a href=/vita title=Vita class=nav-link>
Vita
</a>
</li>
<li class=nav-item>
<a href=/contact title="Contact Me" class=nav-link>
<i class="fas fa-id-card"></i> </span>
</a>
</li>
</ul>
</div>
</nav>
</header>
<div id=content>
<article class=post>
<header class=p-2>
<div class=row>
<div class=col-md-9>
<h2>Concatenating vectors unless a vector is empty </h2>
</div>
<div class="col-md-3 text-md-end">
<span class=small>2021-05-13
</span>
</div>
</div>
<p>
By W. Joel Schneider
</p>
</header>
<div class="bg-light p-2">
<h2>Summary</h3>The paste and paste0 functions have a recycle0 argument that returns an empty vector when any part of the string is empty.</div>
<section class=body>
<script src=/posts/concatenating-vectors-unless-a-vector-is-empty/index_files/header-attrs/header-attrs.js></script>
<p>I often need to add a prefix or suffix to a character vector:</p>
<pre class=r><code>library(tidyverse)
x &lt;- c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)
paste0(x, &quot;_1&quot;)</code></pre>
<pre><code>## [1] &quot;A_1&quot; &quot;B_1&quot; &quot;C_1&quot;</code></pre>
<p>However, if the vector is empty, I do not want bare prefixes or suffixes like this:</p>
<pre class=r><code>x &lt;- character(0)
paste0(x, &quot;_1&quot;)</code></pre>
<pre><code>## [1] &quot;_1&quot;</code></pre>
<p>I used to write a lot of tedious <code>if</code> statements like this:</p>
<pre class=r><code>if (length(x) == 0) {
  y &lt;- character(0)
} else {
  y &lt;- paste0(x, &quot;_1&quot;)
}</code></pre>
<p>For R 4.0.1 and later versions, the <code>paste</code> and <code>paste0</code> functions acquired the <code>recycle0</code> argument. Setting <code>recycle0</code> to <code>TRUE</code> returns an empty vector if at least one string is empty:</p>
<pre class=r><code>paste0(x, &quot;_1&quot;, recycle0 = TRUE)</code></pre>
<pre><code>## character(0)</code></pre>
<p>If you need to work with an earlier version of R, you can use the <code>sprintf</code> function instead:</p>
<pre class=r><code># Non-empty vector
x &lt;- c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)
sprintf(&quot;%s_1&quot;, x)</code></pre>
<pre><code>## [1] &quot;A_1&quot; &quot;B_1&quot; &quot;C_1&quot;</code></pre>
<pre class=r><code># Empty vector
x &lt;- character(0)
sprintf(&quot;%s_1&quot;, x)</code></pre>
<pre><code>## character(0)</code></pre>
<p>The <code>glue</code> function from the glue package also works nicely:</p>
<pre class=r><code># Non-empty vector
x &lt;- c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)
glue::glue(&quot;{x}_1&quot;)</code></pre>
<pre><code>## A_1
## B_1
## C_1</code></pre>
<pre class=r><code># Empty vector
x &lt;- character(0)
glue::glue(&quot;{x}_1&quot;)</code></pre>
</section>
</article>
</div>
<footer>
<nav class="nav navbar-expand-md bg-dark navbar-dark my-1">
<ul class=navbar-nav>
<li class=nav-item>
<a href="mailto:W.%20Joel%20Schneider%20%3cschneider@temple.edu%3e?subject=Question%20from%20your%20website&body=Dear%20Dr.%20Schneider%2C%0D%0A" class=nav-link target=_blank>
<i class="far fa-envelope" title=Email> </i>
<span class="d-inline d-md-none">Email</span>
</a>
</li>
<li class=nav-item>
<a href=/media/schneider-vita.pdf class=nav-link target=_blank>
<i class="ai ai-cv" title="Curriculum Vitae"> </i>
<span class="d-inline d-md-none">Curriculum Vitae</span>
</a>
</li>
<li class=nav-item>
<a href=https://www.researchgate.net/profile/W-Schneider-3 class=nav-link target=_blank>
<i class="ai ai-researchgate" title=ResearchGate> </i>
<span class="d-inline d-md-none">ResearchGate</span>
</a>
</li>
<li class=nav-item>
<a href="https://scholar.google.com/citations?hl=en&pli=1&user=aojOxP4AAAAJ" class=nav-link target=_blank>
<i class="ai ai-google-scholar" title="Google Scholar"> </i>
<span class="d-inline d-md-none">Google Scholar</span>
</a>
</li>
<li class=nav-item>
<a href=https://orcid.org/0000-0002-8393-5316 class=nav-link target=_blank>
<i class="ai ai-orcid" title=Orchid> </i>
<span class="d-inline d-md-none">Orchid</span>
</a>
</li>
<li class=nav-item>
<a href=https://osf.io/whabf/ class=nav-link target=_blank>
<i class="ai ai-osf" title="Open Science Framework"> </i>
<span class="d-inline d-md-none">Open Science Framework</span>
</a>
</li>
<li class=nav-item>
<a href=https://www.zotero.org/wjschne class=nav-link target=_blank>
<i class="ai ai-zotero" title=Zotero> </i>
<span class="d-inline d-md-none">Zotero</span>
</a>
</li>
<li class=nav-item>
<a href=https://github.com/wjschne class=nav-link target=_blank>
<i class="fab fa-github" title=GitHub> </i>
<span class="d-inline d-md-none">GitHub</span>
</a>
</li>
<li class=nav-item>
<a href=https://stackoverflow.com/users/4513316/joel-schneider class=nav-link target=_blank>
<i class="ai ai-stackoverflow" title=stackoverflow> </i>
<span class="d-inline d-md-none">stackoverflow</span>
</a>
</li>
<li class=nav-item>
<a href=https://twitter.com/WJoelSchneider class=nav-link target=_blank>
<i class="fab fa-twitter" title=Twitter> </i>
<span class="d-inline d-md-none">Twitter</span>
</a>
</li>
<li class=nav-item>
<a href=https://www.youtube.com/channel/UCFTUraTjxq743KfH-5gWrWg class=nav-link target=_blank>
<i class="fab fa-youtube" title=YouTube> </i>
<span class="d-inline d-md-none">YouTube</span>
</a>
</li>
</ul>
</nav>
<p class=text-end>
<i class="fas fa-copyright"> </i> 2021
</p>
</footer>
</div>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js></script>
<script>hljs.configure({languages:[]}),hljs.initHighlightingOnLoad()</script>
<script src=https://code.jquery.com/jquery-3.4.1.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js></script>
<script src=https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js></script>
</body>
</html>